## Software-for-rating-improvement (YouTube Soft)

Современное веб-приложение на Flask для массового управления YouTube‑аккаунтами, загрузки прокси и целевых видео, с возможностью запуска автоматизированных действий по аккаунтам в несколько потоков. Приложение предоставляет удобный UI (панели настроек, загрузки, управления очередью и аккаунтами) и REST API для интеграций.

### Ключевые возможности
- **Веб‑интерфейс**: старт/стоп выполнения, статистика, загрузка данных, управление аккаунтами и очередью.
- **Многопоточность**: параллельная обработка выбранных аккаунтов.
- **Имитация поведения**: опции лайков, подписок, реферальных переходов, «человеческого» поведения.
- **Стратегии выбора видео**: одно на всех, случайное, round‑robin, последовательное.
- **Очередь видео**: приоритизация, фильтры поиска, статусы элементов.
- **Работа с прокси и профилями**: хранение прокси в БД, выдача прокси на аккаунт, интеграция с Omnilogin (антидетект‑браузер) через `omnilogin_manager.py`.
- **Импорт данных**: аккаунты, прокси, URL и названия видео, теги.

### Технологический стек
- Backend: `Python 3`, `Flask`, `sqlite3`
- Frontend: Чистые `HTML/CSS/JS`, иконки Font Awesome
- Интеграции: Omnilogin HTTP API (порт 35353); предполагается класс `GoLoginAuth` для основной логики работы с YouTube

### Структура проекта
- `app.py` — основной Flask‑сервер и REST API, фоновый запуск скрипта, работа с БД
- `omnilogin_manager.py` — управление профилями и процессами антидетект‑браузера через Omnilogin API
- `gologin_auth.py` — исполнитель автоматизации (не показан полностью, но используется как движок `script.run()`)
- `templates/index.html` — главная страница UI
- `static/css/style.css`, `static/js/script.js` — стили и логика фронтенда
- `config.json` — сохраняемые параметры запуска, сформированные из UI
- `schema.sql` — SQL‑схема БД (читается приложением при первом запуске), должна присутствовать рядом с `app.py`

### Требования
- Windows 10/11 (поддерживаются и Linux/macOS, но Windows — основной фокус из‑за `taskkill`)
- Python 3.9+
- Установленный и работающий Omnilogin (локальный API по умолчанию `http://localhost:35353`)

Рекомендуется создать виртуальное окружение.

```bash
python -m venv .venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/macOS
pip install -r requirements.txt
```

Если файла `requirements.txt` нет, установите основные пакеты вручную:

```bash
pip install flask requests psutil
```

### Запуск
1) Убедитесь, что Omnilogin запущен и доступен по `http://localhost:35353`.
2) Запустите сервер Flask:

```bash
python app.py
```

Приложение поднимется на `http://0.0.0.0:5000` (доступно локально по `http://localhost:5000`). При первом запуске создастся БД `youtube_soft.db` (по схеме из `schema.sql`).

### Работа через UI (коротко)
- Откройте `http://localhost:5000`.
- В панели «Загрузка данных» поочередно загрузите файлы: Аккаунты, Прокси, Видео URL. При необходимости — Теги и Названия.
- В «Настройках» задайте длительность просмотра, макс. действий, стратегию URL, опции поведения, число потоков.
- В «Управлении» нажмите «Старт» для запуска обработки выбранных аккаунтов. «Стоп» — для корректной остановки и закрытия браузеров.
- В «Управлении аккаунтами» можно выделять/снимать выделение, удалять аккаунты, назначать метки, просматривать привязанный прокси.
- В «Очереди видео» добавляйте задания (тег, название, фильтр, приоритет), очищайте и отслеживайте статусы.

### Форматы загружаемых файлов
- Аккаунты (`/accounts`, .txt): по строке на аккаунт, формат `email:password[:recovery_email]`
- Прокси (`/proxies`, .txt): по строке на прокси, формат свободный, хранится как есть
- Видео URL (`/urls`, .txt): по строке на URL
- Названия видео (`/titles`, .txt): по строке на название
- Теги (`/tags`, .txt): по строке на тег

Поддерживаются только файлы с расширением `.txt`.

### Основные API‑эндпоинты (выдержка)
- `GET /` — UI
- `POST /start_script` — старт обработки
- `POST /stop_script` — остановка, закрытие браузеров (Windows: `taskkill`)
- `GET|POST|DELETE /accounts` — список/импорт/удаление аккаунтов
- `POST /accounts/<id>/tag` — задать/удалить метку
- `POST /proxies` — импорт прокси, `GET /accounts/<id>/proxy` — получить прокси аккаунта, `POST /accounts/<id>/proxy` — привязка прокси
- `POST /urls`, `POST /titles`, `POST /tags` — импорт соответствующих списков
- `GET /status` — статус выполнения и счётчики
- `GET /stats` — агрегированная статистика (из `report.json`, при наличии)
- `GET|POST|DELETE /queue` — управление очередью видео
- `PUT|DELETE /queue/<item_id>` — изменить статус/удалить элемент
- `GET /queue/stats`, `POST /queue/refresh` — статистика/ручное обновление очереди
- `GET /stop/<profile_id>` — закрыть браузер конкретного профиля через Omnilogin

### Настройки запуска (config.json)
Формируется при нажатии «Старт» и содержит, в частности:
- `watch_duration` — длительность просмотра (секунды)
- `max_actions_per_account` — максимум действий на аккаунт
- `human_behavior`, `enable_likes`, `enable_subscriptions`, `enable_referral`
- `urls_strategy` — стратегия выбора видео
- `create_channel` — создавать ли канал
- `enable_title_search` — режим поиска видео по названию (меняет доступность ряда опций в UI)
- `filter_strategy` — фильтры поиска (для очереди)

### Интеграция с Omnilogin
Файл `omnilogin_manager.py` реализует:
- создание/запуск/закрытие профилей;
- привязку прокси (встроенных и по ID);
- строгие сценарии завершения браузера (Windows: `taskkill` по `chrome.exe`, `chromedriver.exe`, и т.д.);
- кросс‑платформенное завершение процессов (Linux/macOS через `pkill`).

Для работы требуется запущенный Omnilogin API. При необходимости измените `base_url` в конструкторе `OmniloginManager`.

### База данных
Приложение использует `sqlite3` с локальным файлом `youtube_soft.db`. При первом запуске ожидается наличие файла `schema.sql` со схемой таблиц (аккаунты, теги аккаунтов, прокси, соответствия аккаунт‑прокси, очереди видео, справочники тегов/URL/названий и пр.). Если у вас нет `schema.sql`, добавьте его рядом с `app.py` и адаптируйте под используемые эндпоинты.

### Безопасность и ответственность
- Храните файлы с аккаунтами и БД в защищённом месте.
- Используйте прокси и автоматизацию в соответствии с законодательством и правилами платформ.
- Автор не несёт ответственности за возможные блокировки аккаунтов и иные последствия использования.

### Отладка и типичные проблемы
- «Скрипт уже запущен»: остановите текущий запуск через «Стоп», дождитесь закрытия браузеров.
- Браузер не закрывается: используйте «Стоп» повторно; на Windows помогает `strict_kill_browser()` (встроено в остановку).
- Нет статистики: при отсутствии `report.json` UI покажет нули/данные из DOM — это нормально.
- Omnilogin недоступен: проверьте, что сервис запущен, и порт 35353 открыт локально.

### Лицензия
На усмотрение автора проекта. Добавьте файл LICENSE при необходимости.

## О проекте

Веб-приложение на Flask для управления аккаунтами YouTube, очередью видео и автоматизацией действий с использованием антидетект-браузера Omnilogin.

### Основные возможности
- Управление аккаунтами: импорт из файла, метки, привязка прокси
- Работа с очередью видео: добавление по тегам/названиям, приоритеты, статусы
- Загрузка данных: списки URL, названий, тегов, прокси
- Контроль процессов: запуск/остановка автоматизации, строгие закрытия браузеров
- Хранение данных: SQLite, JSON-отчеты, простая конфигурация через `config.json`

### Технологии
- Flask, Jinja2, SQLite
- Requests, asyncio, threading
- Omnilogin API для управления профилями браузера